# GeoGebra MCP é¡¹ç›®æ¶æ„ä¸å·¥ä½œåŸç†

## ğŸ“‹ ç›®å½•
- [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
- [æ ¸å¿ƒåŸç†](#æ ¸å¿ƒåŸç†)
- [GeoGebra API æ¥å£](#geogebra-api-æ¥å£)
- [Puppeteer äº¤äº’æœºåˆ¶](#puppeteer-äº¤äº’æœºåˆ¶)
- [å®Œæ•´äº¤äº’æµç¨‹](#å®Œæ•´äº¤äº’æµç¨‹)
- [æŠ€æœ¯æ¶æ„å›¾](#æŠ€æœ¯æ¶æ„å›¾)
- [å…³é”®ä»£ç è§£æ](#å…³é”®ä»£ç è§£æ)
- [æ€§èƒ½ä¼˜åŒ–](#æ€§èƒ½ä¼˜åŒ–)

---

## é¡¹ç›®æ¦‚è¿°

### ä»€ä¹ˆæ˜¯ GeoGebra MCPï¼Ÿ

GeoGebra MCP æ˜¯ä¸€ä¸ª**æ¨¡å‹ä¸Šä¸‹æ–‡åè®®(Model Context Protocol)æœåŠ¡å™¨**ï¼Œå®ƒå…è®¸AIåŠ©æ‰‹ï¼ˆå¦‚Claudeã€ChatGPTç­‰ï¼‰é€šè¿‡æ ‡å‡†åŒ–çš„å·¥å…·æ¥å£ä¸GeoGebraæ•°å­¦è½¯ä»¶è¿›è¡Œäº¤äº’ï¼Œå®ç°ï¼š

- âœ… åˆ›å»ºå‡ ä½•å›¾å½¢ï¼ˆç‚¹ã€çº¿ã€åœ†ã€å¤šè¾¹å½¢ï¼‰
- âœ… ç»˜åˆ¶æ•°å­¦å‡½æ•°å’Œå›¾åƒ  
- âœ… æ‰§è¡Œä»£æ•°è®¡ç®—ï¼ˆæ±‚å¯¼ã€ç§¯åˆ†ã€è§£æ–¹ç¨‹ï¼‰
- âœ… å¯¼å‡ºå¯è§†åŒ–ç»“æœï¼ˆPNGã€SVGã€PDFï¼‰
- âœ… åˆ›å»ºåŠ¨ç”»å’Œäº¤äº’å¼æ¼”ç¤º

### é¡¹ç›®å®šä½

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      MCPåè®®      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     Puppeteer     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AIåŠ©æ‰‹      â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚ MCP Server   â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚ GeoGebra     â”‚
â”‚ (Claudeç­‰)  â”‚  JSON-RPC 2.0    â”‚ (æœ¬é¡¹ç›®)     â”‚   Browser API    â”‚ (Webç‰ˆ)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ ¸å¿ƒåŸç†

### 1. æ— å¤´æµè§ˆå™¨æ–¹æ¡ˆ

æœ¬é¡¹ç›®é‡‡ç”¨**Puppeteer + GeoGebra Webåº”ç”¨**çš„æ¶æ„ï¼Œè€Œä¸æ˜¯ç›´æ¥è°ƒç”¨GeoGebraæ¡Œé¢åº”ç”¨æˆ–åŸç”Ÿåº“ã€‚

**ä¸ºä»€ä¹ˆé€‰æ‹©è¿™ç§æ–¹æ¡ˆï¼Ÿ**

| æ–¹æ¡ˆ | ä¼˜ç‚¹ | ç¼ºç‚¹ |
|------|------|------|
| **Puppeteer + Web** âœ… | è·¨å¹³å°ã€ä¸éœ€è¦å®‰è£…GeoGebraã€APIç¨³å®š | å ç”¨å†…å­˜è¾ƒå¤§ã€éœ€è¦ç½‘ç»œè®¿é—® |
| æ¡Œé¢åº”ç”¨è°ƒç”¨ | åŠŸèƒ½å®Œæ•´ | éœ€è¦å®‰è£…ã€è·¨å¹³å°å›°éš¾ã€è‡ªåŠ¨åŒ–å¤æ‚ |
| åŸç”Ÿç»‘å®š | æ€§èƒ½æœ€ä½³ | ç»´æŠ¤æˆæœ¬é«˜ã€GeoGebraæ— å®˜æ–¹Node.jsåº“ |

### 2. å·¥ä½œæµç¨‹æ¦‚è§ˆ

```mermaid
sequenceDiagram
    participant AI as AIåŠ©æ‰‹
    participant MCP as MCP Server
    participant Puppeteer as Puppeteer
    participant Chrome as æ— å¤´æµè§ˆå™¨
    participant GGB as GeoGebra API

    AI->>MCP: tools/call (åˆ›å»ºç‚¹ A=(1,2))
    MCP->>Puppeteer: è·å–å®ä¾‹
    Puppeteer->>Chrome: page.evaluate()
    Chrome->>GGB: evalCommand("A = (1, 2)")
    GGB-->>Chrome: æ‰§è¡ŒæˆåŠŸ
    Chrome-->>Puppeteer: è¿”å›ç»“æœ
    Puppeteer-->>MCP: ç‚¹åˆ›å»ºæˆåŠŸ
    MCP-->>AI: è¿”å›å·¥å…·æ‰§è¡Œç»“æœ
```

### 3. ä¸‰å±‚æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åº”ç”¨å±‚ (Application Layer)                                â”‚
â”‚ â€¢ MCP Server (server.ts)                                  â”‚
â”‚ â€¢ å·¥å…·æ³¨å†Œè¡¨ (tools/index.ts)                             â”‚
â”‚ â€¢ å·¥å…·å®ç° (geogebra-tools.ts)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æŠ½è±¡å±‚ (Abstraction Layer)                                â”‚
â”‚ â€¢ GeoGebraInstance ç±» (geogebra-instance.ts)             â”‚
â”‚ â€¢ å®ä¾‹æ± ç®¡ç† (instance-pool.ts)                           â”‚
â”‚ â€¢ é”™è¯¯å¤„ç†å’ŒéªŒè¯ (validation.ts, errors.ts)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åŸºç¡€è®¾æ–½å±‚ (Infrastructure Layer)                         â”‚
â”‚ â€¢ Puppeteer æµè§ˆå™¨æ§åˆ¶                                    â”‚
â”‚ â€¢ GeoGebra Web Apps API                                   â”‚
â”‚ â€¢ Chrome/Chromium æ— å¤´æµè§ˆå™¨                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## GeoGebra API æ¥å£

### GeoGebra Apps API ç®€ä»‹

GeoGebraæä¾›äº†**å®˜æ–¹çš„Webåº”ç”¨API**ï¼Œè¿™æ˜¯æœ¬é¡¹ç›®èƒ½å¤Ÿå·¥ä½œçš„åŸºç¡€ã€‚

**å®˜æ–¹æ–‡æ¡£**: https://geogebra.github.io/docs/reference/en/GeoGebra_Apps_API/

### API åŠ è½½æ–¹å¼

é¡¹ç›®é€šè¿‡CDNåŠ è½½GeoGebraï¼š

```html
<!-- åœ¨ç”Ÿæˆçš„HTMLé¡µé¢ä¸­ -->
<script src="https://www.geogebra.org/apps/deployggb.js"></script>
```

### æ ¸å¿ƒAPIæ–¹æ³•

| APIæ–¹æ³• | åŠŸèƒ½ | é¡¹ç›®ä¸­çš„ä½¿ç”¨ |
|---------|------|-------------|
| `evalCommand(cmd)` | æ‰§è¡ŒGeoGebraå‘½ä»¤ | åˆ›å»ºå¯¹è±¡ã€è®¾ç½®å±æ€§ |
| `getPNGBase64()` | å¯¼å‡ºPNGå›¾åƒ | å›¾åƒå¯¼å‡ºåŠŸèƒ½ |
| `exportSVG()` | å¯¼å‡ºSVG | çŸ¢é‡å›¾å¯¼å‡º |
| `getAllObjectNames()` | è·å–æ‰€æœ‰å¯¹è±¡ | æŸ¥è¯¢æ„é€ å†…å®¹ |
| `getObjectType()` | è·å–å¯¹è±¡ç±»å‹ | å¯¹è±¡ä¿¡æ¯æŸ¥è¯¢ |
| `getValue()` / `setValue()` | è·å–/è®¾ç½®å¯¹è±¡å€¼ | åŠ¨ç”»å’Œå‚æ•°æ§åˆ¶ |
| `setAnimating()` | è®¾ç½®åŠ¨ç”» | åŠ¨ç”»åŠŸèƒ½ |
| `exists()` / `deleteObject()` | æ£€æŸ¥/åˆ é™¤å¯¹è±¡ | å¯¹è±¡ç®¡ç† |

### API åˆå§‹åŒ–è¿‡ç¨‹

```javascript
// åœ¨ç”Ÿæˆçš„HTMLä¸­çš„åˆå§‹åŒ–ä»£ç 
const parameters = {
    "appName": "classic",          // ä½¿ç”¨ç»å…¸ç‰ˆï¼ˆå®Œæ•´åŠŸèƒ½ï¼‰
    "width": 800,
    "height": 600,
    "showMenuBar": false,
    "showToolBar": false,
    "showAlgebraInput": false,
    "enableCAS": true,             // å¯ç”¨è®¡ç®—æœºä»£æ•°ç³»ç»Ÿ
    "language": "en",
    "appletOnLoad": function(api) {
        window.ggbApplet = api;    // æš´éœ²APIåˆ°å…¨å±€
        window.ggbReady = true;
    }
};

const applet = new GGBApplet(parameters, true);
applet.inject('ggb-element');
```

---

## Puppeteer äº¤äº’æœºåˆ¶

### 1. æµè§ˆå™¨å®ä¾‹ç”Ÿå‘½å‘¨æœŸ

```typescript
// src/utils/geogebra-instance.ts
export class GeoGebraInstance implements GeoGebraAPI {
  private browser?: Browser;
  private page?: Page;
  
  async initialize(headless: boolean = true): Promise<void> {
    // 1. å¯åŠ¨æµè§ˆå™¨
    this.browser = await puppeteer.launch({
      headless,
      args: [
        '--no-sandbox',
        '--disable-setuid-sandbox',
        '--disable-dev-shm-usage',
        // ... å…¶ä»–ä¼˜åŒ–å‚æ•°
      ]
    });
    
    // 2. åˆ›å»ºæ–°é¡µé¢
    this.page = await this.browser.newPage();
    
    // 3. è®¾ç½®è§†å£å¤§å°
    await this.page.setViewport({ width: 800, height: 600 });
    
    // 4. åŠ è½½GeoGebra HTML
    await this.loadGeoGebra();
    
    // 5. ç­‰å¾…GeoGebraå°±ç»ª
    await this.waitForReady();
  }
}
```

### 2. HTMLé¡µé¢ç”Ÿæˆ

```typescript
private generateAppletHTML(): string {
  return `
<!DOCTYPE html>
<html>
<head>
    <title>GeoGebra Applet</title>
    <script src="https://www.geogebra.org/apps/deployggb.js"></script>
</head>
<body>
    <div id="ggb-element"></div>
    <script>
        // å…¨å±€å˜é‡ç”¨äºçŠ¶æ€æ£€æŸ¥
        window.ggbReady = false;
        window.ggbApplet = null;
        
        // GeoGebraå‚æ•°é…ç½®
        const parameters = {
            "appName": "classic",
            "width": ${this.config.width},
            "height": ${this.config.height},
            // ... æ›´å¤šé…ç½®
            "appletOnLoad": function(api) {
                window.ggbApplet = api;
                window.ggbReady = true;
            }
        };
        
        // æ³¨å…¥GeoGebraåº”ç”¨
        const applet = new GGBApplet(parameters, true);
        applet.inject('ggb-element');
    </script>
</body>
</html>`;
}
```

### 3. å‘½ä»¤æ‰§è¡Œæœºåˆ¶

é€šè¿‡ `page.evaluate()` åœ¨æµè§ˆå™¨ä¸Šä¸‹æ–‡ä¸­æ‰§è¡ŒJavaScriptä»£ç ï¼š

```typescript
async evalCommand(command: string): Promise<GeoGebraCommandResult> {
  // åœ¨æµè§ˆå™¨é¡µé¢çš„JavaScriptä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œ
  const result = await this.page!.evaluate((cmd) => {
    try {
      // è°ƒç”¨GeoGebra API
      const success = window.ggbApplet.evalCommand(cmd);
      
      // å°è¯•è·å–è¿”å›å€¼
      let result = undefined;
      if (success) {
        try {
          result = window.ggbApplet.getValue(cmd);
        } catch (e) {
          // æŸäº›å‘½ä»¤å¯èƒ½æ²¡æœ‰è¿”å›å€¼
        }
      }
      
      return {
        success: success,
        result: result,
        error: success ? undefined : 'Command execution failed'
      };
    } catch (error) {
      return {
        success: false,
        result: undefined,
        error: error.message || 'Unknown error'
      };
    }
  }, command); // ä¼ é€’å‚æ•°åˆ°æµè§ˆå™¨ä¸Šä¸‹æ–‡
  
  return result;
}
```

### 4. æ•°æ®å¯¼å‡ºæœºåˆ¶

**PNGå¯¼å‡ºç¤ºä¾‹ï¼š**

```typescript
async exportPNG(scale: number = 1, transparent: boolean = false): Promise<string> {
  // åœ¨æµè§ˆå™¨ä¸Šä¸‹æ–‡ä¸­è·å–base64ç¼–ç çš„PNG
  const pngBase64 = await this.page!.evaluate((scale, transparent) => {
    const applet = window.ggbApplet;
    
    // è°ƒç”¨GeoGebraçš„PNGå¯¼å‡ºAPI
    const result = applet.getPNGBase64(scale, transparent);
    
    return result; // è¿”å›base64å­—ç¬¦ä¸²
  }, scale, transparent);
  
  // éªŒè¯è¿”å›æ•°æ®
  if (!pngBase64 || typeof pngBase64 !== 'string') {
    throw new Error('PNG export failed');
  }
  
  return pngBase64;
}
```

**PDFå¯¼å‡ºï¼ˆä½¿ç”¨æµè§ˆå™¨åŸç”ŸåŠŸèƒ½ï¼‰ï¼š**

```typescript
async exportPDF(): Promise<string> {
  // ä½¿ç”¨Puppeteerçš„PDFç”ŸæˆåŠŸèƒ½
  const pdf = await this.page!.pdf({
    format: 'A4',
    printBackground: true,
    margin: {
      top: '0.5in',
      bottom: '0.5in',
      left: '0.5in',
      right: '0.5in'
    }
  });
  
  return pdf.toString('base64');
}
```

---

## å®Œæ•´äº¤äº’æµç¨‹

### åœºæ™¯1ï¼šAIåŠ©æ‰‹åˆ›å»ºä¸€ä¸ªç‚¹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. AIè¯·æ±‚ (é€šè¿‡MCPåè®®)                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ {                                                               â”‚
â”‚   "jsonrpc": "2.0",                                             â”‚
â”‚   "method": "tools/call",                                       â”‚
â”‚   "params": {                                                   â”‚
â”‚     "name": "geogebra_create_point",                            â”‚
â”‚     "arguments": { "name": "A", "x": 3, "y": 4 }                â”‚
â”‚   }                                                             â”‚
â”‚ }                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. MCP Server è·¯ç”±è¯·æ±‚                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ server.ts æ¥æ”¶JSON-RPCè¯·æ±‚                                    â”‚
â”‚ â€¢ è°ƒç”¨ toolRegistry.executeTool()                               â”‚
â”‚ â€¢ æ‰¾åˆ° geogebra_create_point å·¥å…·å¤„ç†å™¨                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. å·¥å…·å¤„ç†å™¨ (geogebra-tools.ts)                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ éªŒè¯å‚æ•°ï¼švalidateObjectName("A")                             â”‚
â”‚ â€¢ éªŒè¯å‚æ•°ï¼švalidateCoordinates(3, 4)                           â”‚
â”‚ â€¢ æ„é€ å‘½ä»¤ï¼šcommand = "A = (3, 4)"                              â”‚
â”‚ â€¢ è·å–GeoGebraå®ä¾‹                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. å®ä¾‹æ± ç®¡ç† (instance-pool.ts)                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ æ£€æŸ¥æ˜¯å¦æœ‰é»˜è®¤å®ä¾‹                                             â”‚
â”‚ â€¢ å¦‚æœæ²¡æœ‰ï¼Œåˆ›å»ºæ–°å®ä¾‹                                           â”‚
â”‚   - å¯åŠ¨Puppeteeræµè§ˆå™¨                                         â”‚
â”‚   - åŠ è½½GeoGebra HTML                                            â”‚
â”‚   - ç­‰å¾…åˆå§‹åŒ–å®Œæˆ                                               â”‚
â”‚ â€¢ è¿”å›å¯ç”¨å®ä¾‹                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. å‘½ä»¤æ‰§è¡Œ (geogebra-instance.ts)                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ await instance.evalCommand("A = (3, 4)")                        â”‚
â”‚                                                                 â”‚
â”‚ å†…éƒ¨å®ç°ï¼š                                                       â”‚
â”‚ const result = await page.evaluate((cmd) => {                  â”‚
â”‚   const success = window.ggbApplet.evalCommand(cmd);           â”‚
â”‚   return { success, result: ..., error: ... };                 â”‚
â”‚ }, "A = (3, 4)");                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. æµè§ˆå™¨ä¸Šä¸‹æ–‡ (Chrome + GeoGebra)                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ JavaScriptä»£ç åœ¨æµè§ˆå™¨é¡µé¢ä¸­æ‰§è¡Œ                              â”‚
â”‚ â€¢ è°ƒç”¨ window.ggbApplet.evalCommand("A = (3, 4)")              â”‚
â”‚ â€¢ GeoGebraåœ¨å…¶Canvasä¸Šåˆ›å»ºç‚¹A                                   â”‚
â”‚ â€¢ è¿”å›æ‰§è¡Œç»“æœåˆ°Puppeteer                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 7. è·å–å¯¹è±¡ä¿¡æ¯                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ const pointInfo = await instance.getObjectInfo("A")             â”‚
â”‚                                                                 â”‚
â”‚ è¿”å›ï¼š                                                           â”‚
â”‚ {                                                               â”‚
â”‚   name: "A",                                                    â”‚
â”‚   type: "point",                                                â”‚
â”‚   visible: true,                                                â”‚
â”‚   x: 3,                                                         â”‚
â”‚   y: 4,                                                         â”‚
â”‚   value: "(3, 4)"                                               â”‚
â”‚ }                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 8. å“åº”ç»™AI (MCPåè®®)                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ {                                                               â”‚
â”‚   "jsonrpc": "2.0",                                             â”‚
â”‚   "id": 123,                                                    â”‚
â”‚   "result": {                                                   â”‚
â”‚     "content": [{                                               â”‚
â”‚       "type": "text",                                           â”‚
â”‚       "text": "{                                                â”‚
â”‚         \"success\": true,                                      â”‚
â”‚         \"command\": \"A = (3, 4)\",                            â”‚
â”‚         \"point\": { ... }                                      â”‚
â”‚       }"                                                        â”‚
â”‚     }]                                                          â”‚
â”‚   }                                                             â”‚
â”‚ }                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### åœºæ™¯2ï¼šå¯¼å‡ºPNGå›¾åƒ

```
1. ç”¨æˆ·: "å°†å½“å‰æ„é€ å¯¼å‡ºä¸ºPNG"
   â†“
2. AIè°ƒç”¨: geogebra_export_png { scale: 2, transparent: false }
   â†“
3. å®ä¾‹æ‰§è¡Œ:
   - è®¾ç½®è§†å›¾å‚æ•°ï¼ˆåæ ‡ç³»ã€è½´ã€ç½‘æ ¼ï¼‰
   - è°ƒç”¨ instance.exportPNG(2, false)
   â†“
4. Puppeteeræ‰§è¡Œ:
   await page.evaluate((scale, transparent) => {
     return window.ggbApplet.getPNGBase64(scale, transparent);
   }, 2, false);
   â†“
5. GeoGebra API:
   - åœ¨Canvasä¸Šæ¸²æŸ“å½“å‰çŠ¶æ€
   - è½¬æ¢ä¸ºPNGæ ¼å¼
   - ç¼–ç ä¸ºBase64å­—ç¬¦ä¸²
   â†“
6. è¿”å›Base64æ•°æ®:
   "iVBORw0KGgoAAAANSUhEUgAAA..."
   â†“
7. AIæ”¶åˆ°ç»“æœå¹¶å¯ä»¥ï¼š
   - ä¿å­˜ä¸ºæ–‡ä»¶
   - åµŒå…¥åˆ°æ–‡æ¡£
   - æ˜¾ç¤ºç»™ç”¨æˆ·
```

---

## æŠ€æœ¯æ¶æ„å›¾

### ç³»ç»Ÿç»„ä»¶å…³ç³»

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          å¤–éƒ¨æ¥å£å±‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ Claude API   â”‚   â”‚ OpenAI API   â”‚   â”‚ å…¶ä»–AIå¹³å°   â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                  â”‚                  â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚ MCPåè®® (JSON-RPC 2.0)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       MCP Server å±‚                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              server.ts (MCP Server)                     â”‚   â”‚
â”‚  â”‚  â€¢ æ¥æ”¶JSON-RPCè¯·æ±‚                                     â”‚   â”‚
â”‚  â”‚  â€¢ è·¯ç”±åˆ°å·¥å…·å¤„ç†å™¨                                      â”‚   â”‚
â”‚  â”‚  â€¢ è¿”å›æ ‡å‡†åŒ–å“åº”                                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                       â”‚                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚          tools/index.ts (å·¥å…·æ³¨å†Œè¡¨)                    â”‚   â”‚
â”‚  â”‚  â€¢ å·¥å…·å‘ç° (tools/list)                                â”‚   â”‚
â”‚  â”‚  â€¢ å·¥å…·æ‰§è¡Œ (tools/call)                                â”‚   â”‚
â”‚  â”‚  â€¢ é”™è¯¯å¤„ç†                                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ä¸šåŠ¡é€»è¾‘å±‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   geogebra-tools.ts (40+ å·¥å…·å®ç°)                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚ åŸºç¡€å·¥å…·     â”‚  â”‚ ç»˜å›¾å·¥å…·     â”‚  â”‚ CASå·¥å…·      â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ - åˆ›å»ºç‚¹     â”‚  â”‚ - å‡½æ•°ç»˜åˆ¶   â”‚  â”‚ - æ±‚å¯¼       â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ - åˆ›å»ºçº¿     â”‚  â”‚ - å‚æ•°æ›²çº¿   â”‚  â”‚ - ç§¯åˆ†       â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ - åˆ›å»ºåœ†     â”‚  â”‚ - éšå¼æ›²çº¿   â”‚  â”‚ - è§£æ–¹ç¨‹     â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚ å¯¼å‡ºå·¥å…·     â”‚  â”‚ åŠ¨ç”»å·¥å…·     â”‚  â”‚ æ•™è‚²å·¥å…·     â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ - PNGå¯¼å‡º    â”‚  â”‚ - æ»‘å—åˆ›å»º   â”‚  â”‚ - æ¨¡æ¿       â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ - SVGå¯¼å‡º    â”‚  â”‚ - åŠ¨ç”»æ§åˆ¶   â”‚  â”‚ - è¯¾ç¨‹è®¡åˆ’   â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ - PDFå¯¼å‡º    â”‚  â”‚ - è½¨è¿¹è¿½è¸ª   â”‚  â”‚ - ç¤ºä¾‹      â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æŠ½è±¡å±‚                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  GeoGebraInstance (geogebra-instance.ts)                â”‚   â”‚
â”‚  â”‚  â€¢ å®ä¾‹ç®¡ç†                                              â”‚   â”‚
â”‚  â”‚  â€¢ å‘½ä»¤æ‰§è¡Œ: evalCommand()                               â”‚   â”‚
â”‚  â”‚  â€¢ å¯¹è±¡æŸ¥è¯¢: getObjectInfo()                             â”‚   â”‚
â”‚  â”‚  â€¢ å¯¼å‡ºåŠŸèƒ½: exportPNG/SVG/PDF()                         â”‚   â”‚
â”‚  â”‚  â€¢ åŠ¨ç”»æ§åˆ¶: setAnimating(), startAnimation()            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                       â”‚                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  å®ä¾‹æ±  (instance-pool.ts)                              â”‚   â”‚
â”‚  â”‚  â€¢ å®ä¾‹åˆ›å»ºå’Œåˆå§‹åŒ–                                      â”‚   â”‚
â”‚  â”‚  â€¢ å®ä¾‹å¤ç”¨                                              â”‚   â”‚
â”‚  â”‚  â€¢ ç”Ÿå‘½å‘¨æœŸç®¡ç†                                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                       â”‚                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  è¾…åŠ©æ¨¡å—                                                â”‚   â”‚
â”‚  â”‚  â€¢ validation.ts - å‚æ•°éªŒè¯                              â”‚   â”‚
â”‚  â”‚  â€¢ errors.ts - é”™è¯¯å¤„ç†                                  â”‚   â”‚
â”‚  â”‚  â€¢ logger.ts - æ—¥å¿—è®°å½•                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    åŸºç¡€è®¾æ–½å±‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              Puppeteer                                  â”‚   â”‚
â”‚  â”‚  â€¢ æµè§ˆå™¨æ§åˆ¶                                            â”‚   â”‚
â”‚  â”‚  â€¢ é¡µé¢è‡ªåŠ¨åŒ–                                            â”‚   â”‚
â”‚  â”‚  â€¢ page.evaluate() - JavaScriptæ³¨å…¥                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                       â”‚                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚         Chrome/Chromium (æ— å¤´æ¨¡å¼)                       â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚  HTMLé¡µé¢ä¸Šä¸‹æ–‡                                  â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  GeoGebra Webåº”ç”¨                       â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ window.ggbApplet (APIå¯¹è±¡)           â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ Canvasæ¸²æŸ“                           â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ CASè®¡ç®—å¼•æ“                          â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å…³é”®ä»£ç è§£æ

### 1. å®ä¾‹æ± ç®¡ç†

**ä¸ºä»€ä¹ˆéœ€è¦å®ä¾‹æ± ï¼Ÿ**

- æ¯æ¬¡åˆ›å»ºæ–°çš„æµè§ˆå™¨å®ä¾‹å¾ˆæ…¢ï¼ˆ~2-3ç§’ï¼‰
- èµ„æºå ç”¨å¤§ï¼ˆæ¯ä¸ªå®ä¾‹çº¦100-150MBå†…å­˜ï¼‰
- å®ä¾‹å¤ç”¨å¯ä»¥å¤§å¹…æå‡æ€§èƒ½

**å®ç°æ–¹å¼ï¼š**

```typescript
// src/tools/geogebra-tools.ts (ç®€åŒ–ç‰ˆ)
class GeoGebraInstancePool {
  private defaultInstance: GeoGebraInstance | undefined;

  async getDefaultInstance(): Promise<GeoGebraInstance> {
    if (!this.defaultInstance) {
      // ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶åˆ›å»ºå®ä¾‹
      this.defaultInstance = new GeoGebraInstance({
        appName: 'classic',
        width: 800,
        height: 600,
        showMenuBar: false,
        showToolBar: false,
      });
      
      // åˆå§‹åŒ–ï¼ˆå¯åŠ¨æµè§ˆå™¨ï¼ŒåŠ è½½GeoGebraï¼‰
      await this.defaultInstance.initialize(true);
      logger.info('Default GeoGebra instance initialized');
    }
    
    // åç»­è°ƒç”¨ç›´æ¥è¿”å›å·²æœ‰å®ä¾‹
    return this.defaultInstance;
  }

  async cleanup(): Promise<void> {
    if (this.defaultInstance) {
      await this.defaultInstance.cleanup();
      this.defaultInstance = undefined;
    }
  }
}

const instancePool = new GeoGebraInstancePool();

// è¿›ç¨‹é€€å‡ºæ—¶æ¸…ç†
process.on('exit', () => instancePool.cleanup());
process.on('SIGINT', () => {
  instancePool.cleanup();
  process.exit(0);
});
```

### 2. å‘½ä»¤æ‰§è¡Œçš„é”™è¯¯å¤„ç†

```typescript
async evalCommand(command: string): Promise<GeoGebraCommandResult> {
  this.ensureInitialized(); // ç¡®ä¿å®ä¾‹å·²åˆå§‹åŒ–
  this.updateActivity();     // æ›´æ–°æœ€åæ´»åŠ¨æ—¶é—´

  try {
    // æ£€æŸ¥appletæ˜¯å¦å¯ç”¨
    const appletCheck = await this.page!.evaluate(() => {
      return {
        appletExists: !!window.ggbApplet,
        evalCommandExists: typeof window.ggbApplet?.evalCommand === 'function'
      };
    });
    
    if (!appletCheck.appletExists || !appletCheck.evalCommandExists) {
      throw new Error(`GeoGebra applet not available`);
    }
    
    // æ‰§è¡Œå‘½ä»¤
    const result = await this.page!.evaluate((cmd) => {
      try {
        const success = window.ggbApplet.evalCommand(cmd);
        
        // å°è¯•è·å–ç»“æœå€¼
        let result = undefined;
        if (success) {
          try {
            result = window.ggbApplet.getValue(cmd);
          } catch (e) {
            // æŸäº›å‘½ä»¤æ²¡æœ‰è¿”å›å€¼
          }
        }
        
        return {
          success: success,
          result: result,
          error: success ? undefined : 'Command execution failed'
        };
      } catch (error) {
        return {
          success: false,
          result: undefined,
          error: error.message || 'Unknown error'
        };
      }
    }, command);

    if (!result.success) {
      throw new GeoGebraCommandError(result.error || 'Command failed', command);
    }

    return result;
  } catch (error) {
    logger.error(`Command execution failed`, { command, error });
    throw new GeoGebraCommandError(
      `Failed to execute command: ${error.message}`,
      command
    );
  }
}
```

### 3. å‚æ•°éªŒè¯æœºåˆ¶

```typescript
// src/utils/validation.ts
export function validateObjectName(name: string): ValidationResult {
  if (!name || typeof name !== 'string') {
    return { isValid: false, error: 'Name must be a non-empty string' };
  }
  
  if (!/^[a-zA-Z][a-zA-Z0-9_]*$/.test(name)) {
    return { 
      isValid: false, 
      error: 'Name must start with a letter and contain only letters, numbers, and underscores' 
    };
  }
  
  if (name.length > 50) {
    return { isValid: false, error: 'Name is too long (max 50 characters)' };
  }
  
  return { isValid: true };
}

export function validateCoordinates(x: number, y: number, z?: number): ValidationResult {
  if (typeof x !== 'number' || typeof y !== 'number') {
    return { isValid: false, error: 'Coordinates must be numbers' };
  }
  
  if (!isFinite(x) || !isFinite(y)) {
    return { isValid: false, error: 'Coordinates must be finite numbers' };
  }
  
  if (z !== undefined && (!isFinite(z) || typeof z !== 'number')) {
    return { isValid: false, error: 'Z coordinate must be a finite number' };
  }
  
  return { isValid: true };
}
```

---

## æ€§èƒ½ä¼˜åŒ–

### 1. å®ä¾‹å¤ç”¨ç­–ç•¥

```typescript
// âœ… å¥½çš„åšæ³•ï¼šå¤ç”¨å®ä¾‹
const instance = await instancePool.getDefaultInstance();
await instance.evalCommand("A = (1, 2)");
await instance.evalCommand("B = (3, 4)");
await instance.evalCommand("l = Line(A, B)");

// âŒ åçš„åšæ³•ï¼šæ¯æ¬¡åˆ›å»ºæ–°å®ä¾‹
for (let i = 0; i < 10; i++) {
  const instance = new GeoGebraInstance();
  await instance.initialize();  // æ¯æ¬¡éƒ½è¦ç­‰2-3ç§’
  await instance.evalCommand(`P${i} = (${i}, ${i})`);
  await instance.cleanup();
}
```

### 2. æ‰¹é‡æ“ä½œä¼˜åŒ–

```typescript
// âœ… å¥½çš„åšæ³•ï¼šæ‰¹é‡æ‰§è¡Œå‘½ä»¤
async function createMultiplePoints(points: Array<{name: string, x: number, y: number}>) {
  const instance = await instancePool.getDefaultInstance();
  
  for (const point of points) {
    await instance.evalCommand(`${point.name} = (${point.x}, ${point.y})`);
  }
  
  // ä¸€æ¬¡æ€§åˆ·æ–°è§†å›¾
  await instance.refreshViews();
}

// âŒ åçš„åšæ³•ï¼šæ¯ä¸ªç‚¹éƒ½åˆ·æ–°è§†å›¾
async function createPointsSlowly(points: Array<{name: string, x: number, y: number}>) {
  const instance = await instancePool.getDefaultInstance();
  
  for (const point of points) {
    await instance.evalCommand(`${point.name} = (${point.x}, ${point.y})`);
    await instance.refreshViews(); // æ¯æ¬¡éƒ½åˆ·æ–°ï¼Œå¾ˆæ…¢
  }
}
```

### 3. å¯¼å‡ºä¼˜åŒ–

```typescript
// GEB-17: å¢å¼ºçš„PNGå¯¼å‡ºï¼Œå¸¦é‡è¯•æœºåˆ¶
async exportPNG(scale: number = 1, transparent: boolean = false): Promise<string> {
  // 1. éªŒè¯å¯¼å‡ºå‡†å¤‡çŠ¶æ€
  const readiness = await this.validateExportReadiness('png');
  if (!readiness.ready) {
    throw new GeoGebraError(`PNG export not ready: ${readiness.issues.join(', ')}`);
  }

  // 2. é‡è¯•æœºåˆ¶
  return this.retryOperation(async () => {
    const pngBase64 = await this.page!.evaluate((scale, transparent) => {
      const applet = window.ggbApplet;
      
      // å°è¯•å¤šç§æ–¹æ³•
      let result = null;
      
      // æ–¹æ³•1: å®Œæ•´å‚æ•°
      try {
        result = applet.getPNGBase64(scale, transparent);
        if (result && result.length > 0) return result;
      } catch (e) {}
      
      // æ–¹æ³•2: æ— é€æ˜åº¦å‚æ•°
      try {
        result = applet.getPNGBase64(scale);
        if (result && result.length > 0) return result;
      } catch (e) {}
      
      // æ–¹æ³•3: é»˜è®¤å‚æ•°
      try {
        result = applet.getPNGBase64(1);
        if (result && result.length > 0) return result;
      } catch (e) {}
      
      throw new Error('All export methods failed');
    }, scale, transparent);
    
    // 3. éªŒè¯ç»“æœ
    if (!pngBase64 || pngBase64.length < 100) {
      throw new Error('Invalid PNG data');
    }
    
    return pngBase64;
  }, 3, 1000, 'PNG export'); // æœ€å¤šé‡è¯•3æ¬¡ï¼Œé—´éš”1ç§’
}
```

### 4. å†…å­˜ç®¡ç†

```typescript
// å®šæœŸæ¸…ç†èµ„æº
class GeoGebraInstance {
  private lastActivity: Date = new Date();
  
  private updateActivity(): void {
    this.lastActivity = new Date();
  }
  
  isIdle(timeoutMs: number = 300000): boolean {
    const now = new Date();
    return (now.getTime() - this.lastActivity.getTime()) > timeoutMs;
  }
}

// åœ¨å®ä¾‹æ± ä¸­å®ç°è‡ªåŠ¨æ¸…ç†
class GeoGebraInstancePool {
  private cleanupInterval?: NodeJS.Timeout;
  
  constructor() {
    // æ¯5åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡ç©ºé—²å®ä¾‹
    this.cleanupInterval = setInterval(() => {
      this.cleanupIdleInstances();
    }, 5 * 60 * 1000);
  }
  
  private async cleanupIdleInstances() {
    for (const [id, instance] of this.instances) {
      if (instance.isIdle(30 * 60 * 1000)) { // 30åˆ†é’Ÿä¸æ´»åŠ¨
        logger.info(`Cleaning up idle instance: ${id}`);
        await instance.cleanup();
        this.instances.delete(id);
      }
    }
  }
}
```

---

## å¸¸è§é—®é¢˜

### Q1: package.jsonä¸­çš„ @gebrai/gebrai ä¾èµ–æ˜¯ä»€ä¹ˆï¼Ÿ

**A**: è¿™æ˜¯ä¸€ä¸ª**é…ç½®é”™è¯¯**ã€‚é¡¹ç›®ä¸åº”è¯¥ä¾èµ–è‡ªå·±ã€‚è¿™ä¸ªä¾èµ–åº”è¯¥è¢«ç§»é™¤æˆ–è€…æ˜¯æŒ‡å‘å…¶ä»–åŒ…ã€‚

```json
{
  "dependencies": {
    "@gebrai/gebrai": "^1.0.1",  // âŒ é”™è¯¯ï¼šå¾ªç¯ä¾èµ–
    "puppeteer": "^22.15.0",      // âœ… æ­£ç¡®
    // ... å…¶ä»–ä¾èµ–
  }
}
```

**æ­£ç¡®çš„åšæ³•**ï¼š
- å¦‚æœæ˜¯ç”¨äºæµ‹è¯•ï¼Œåº”è¯¥æ”¾åœ¨ devDependencies
- å¦‚æœæ˜¯çœŸæ­£çš„å¤–éƒ¨ä¾èµ–ï¼Œåº”è¯¥ç¡®è®¤åŒ…åæ˜¯å¦æ­£ç¡®
- å¾ˆå¯èƒ½åº”è¯¥ç›´æ¥åˆ é™¤è¿™ä¸ªä¾èµ–

### Q2: ä¸ºä»€ä¹ˆä¸ä½¿ç”¨GeoGebraæ¡Œé¢åº”ç”¨ï¼Ÿ

**A**: ä¸»è¦åŸå› ï¼š
1. **è·¨å¹³å°å…¼å®¹æ€§**ï¼šWebç‰ˆå¯ä»¥åœ¨ä»»ä½•æœ‰æµè§ˆå™¨çš„åœ°æ–¹è¿è¡Œ
2. **è‡ªåŠ¨åŒ–å‹å¥½**ï¼šPuppeteeræä¾›å®Œæ•´çš„è‡ªåŠ¨åŒ–API
3. **éƒ¨ç½²ç®€å•**ï¼šä¸éœ€è¦å®‰è£…GeoGebraæ¡Œé¢åº”ç”¨
4. **ç¨³å®šçš„API**ï¼šGeoGebra Apps APIæ˜¯å®˜æ–¹ç»´æŠ¤çš„å…¬å¼€æ¥å£

### Q3: å†…å­˜å ç”¨å¦‚ä½•ï¼Ÿ

**A**: å•ä¸ªå®ä¾‹çº¦å ç”¨ï¼š
- æµè§ˆå™¨è¿›ç¨‹ï¼š80-120MB
- Node.jsè¿›ç¨‹ï¼š30-50MB
- æ€»è®¡ï¼šçº¦110-170MB

é€šè¿‡å®ä¾‹æ± å¤ç”¨ï¼Œå¯ä»¥é¿å…é¢‘ç¹åˆ›å»ºé”€æ¯å®ä¾‹ã€‚

### Q4: å¦‚ä½•æ‰©å±•æ”¯æŒæ›´å¤šå·¥å…·ï¼Ÿ

**A**: åœ¨ `src/tools/geogebra-tools.ts` ä¸­æ·»åŠ æ–°å·¥å…·ï¼š

```typescript
{
  tool: {
    name: 'geogebra_my_new_tool',
    description: '...',
    inputSchema: { ... }
  },
  handler: async (params) => {
    // 1. éªŒè¯å‚æ•°
    // 2. è·å–å®ä¾‹
    const instance = await instancePool.getDefaultInstance();
    // 3. æ‰§è¡ŒGeoGebraå‘½ä»¤
    // 4. è¿”å›ç»“æœ
  }
}
```

---

## æ€»ç»“

### æ ¸å¿ƒæŠ€æœ¯æ ˆ

1. **MCPåè®®** - AIåŠ©æ‰‹ä¸å·¥å…·çš„æ ‡å‡†é€šä¿¡åè®®
2. **Puppeteer** - æ— å¤´æµè§ˆå™¨è‡ªåŠ¨åŒ–
3. **GeoGebra Apps API** - å®˜æ–¹Webåº”ç”¨æ¥å£
4. **TypeScript** - ç±»å‹å®‰å…¨çš„å¼€å‘

### å·¥ä½œæµç¨‹ç®€è¿°

```
AIè¯·æ±‚ â†’ MCP Server â†’ å·¥å…·å¤„ç†å™¨ â†’ å®ä¾‹æ±  
â†’ Puppeteer â†’ Chromeæµè§ˆå™¨ â†’ GeoGebra API 
â†’ æ‰§è¡Œå‘½ä»¤ â†’ è¿”å›ç»“æœ â†’ MCPå“åº” â†’ AIæ”¶åˆ°ç»“æœ
```

### ä¼˜åŠ¿

- âœ… è·¨å¹³å°å…¼å®¹
- âœ… æ— éœ€å®‰è£…GeoGebra
- âœ… ç¨³å®šçš„å®˜æ–¹API
- âœ… å®Œæ•´çš„æ•°å­¦åŠŸèƒ½
- âœ… å®ä¾‹å¤ç”¨é«˜æ•ˆ

### å±€é™æ€§

- âš ï¸ éœ€è¦ç½‘ç»œè®¿é—®ï¼ˆåŠ è½½GeoGebraï¼‰
- âš ï¸ å†…å­˜å ç”¨è¾ƒå¤§
- âš ï¸ é¦–æ¬¡å¯åŠ¨è¾ƒæ…¢ï¼ˆ~2-3ç§’ï¼‰
- âš ï¸ ä¾èµ–æµè§ˆå™¨ç¯å¢ƒ

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0  
**æœ€åæ›´æ–°**: 2025å¹´10æœˆ  
**ä½œè€…**: GeoGebra MCP é¡¹ç›®å›¢é˜Ÿ

